{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Widget = void 0;\nvar _utils = require(\"./validation/utils\");\nvar _ = require(\"..\");\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n} /*\n   * Copyright 2020 The Matrix.org Foundation C.I.C.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *         http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   */\n/**\n * Represents the barest form of widget.\n */\nvar Widget = /*#__PURE__*/function () {\n  function Widget(definition) {\n    _classCallCheck(this, Widget);\n    this.definition = definition;\n    if (!this.definition) throw new Error(\"Definition is required\");\n    (0, _utils.assertPresent)(definition, \"id\");\n    (0, _utils.assertPresent)(definition, \"creatorUserId\");\n    (0, _utils.assertPresent)(definition, \"type\");\n    (0, _utils.assertPresent)(definition, \"url\");\n  }\n\n  /**\n   * The user ID who created the widget.\n   */\n  _createClass(Widget, [{\n    key: \"creatorUserId\",\n    get: function get() {\n      return this.definition.creatorUserId;\n    }\n\n    /**\n     * The type of widget.\n     */\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this.definition.type;\n    }\n\n    /**\n     * The ID of the widget.\n     */\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this.definition.id;\n    }\n\n    /**\n     * The name of the widget, or null if not set.\n     */\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this.definition.name || null;\n    }\n\n    /**\n     * The title for the widget, or null if not set.\n     */\n  }, {\n    key: \"title\",\n    get: function get() {\n      return this.rawData.title || null;\n    }\n\n    /**\n     * The templated URL for the widget.\n     */\n  }, {\n    key: \"templateUrl\",\n    get: function get() {\n      return this.definition.url;\n    }\n\n    /**\n     * The origin for this widget.\n     */\n  }, {\n    key: \"origin\",\n    get: function get() {\n      return new URL(this.templateUrl).origin;\n    }\n\n    /**\n     * Whether or not the client should wait for the iframe to load. Defaults\n     * to true.\n     */\n  }, {\n    key: \"waitForIframeLoad\",\n    get: function get() {\n      if (this.definition.waitForIframeLoad === false) return false;\n      if (this.definition.waitForIframeLoad === true) return true;\n      return true; // default true\n    }\n\n    /**\n     * The raw data for the widget. This will always be defined, though\n     * may be empty.\n     */\n  }, {\n    key: \"rawData\",\n    get: function get() {\n      return this.definition.data || {};\n    }\n\n    /**\n     * Gets a complete widget URL for the client to render.\n     * @param {ITemplateParams} params The template parameters.\n     * @returns {string} A templated URL.\n     */\n  }, {\n    key: \"getCompleteUrl\",\n    value: function getCompleteUrl(params) {\n      return (0, _.runTemplate)(this.templateUrl, this.definition, params);\n    }\n  }]);\n  return Widget;\n}();\nexports.Widget = Widget;","map":{"version":3,"names":["_utils","require","_","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","Widget","definition","Error","assertPresent","get","creatorUserId","type","id","name","rawData","title","url","URL","templateUrl","origin","waitForIframeLoad","data","value","getCompleteUrl","params","runTemplate","exports"],"sources":["C:\\Users\\pilat\\Documents\\Knwlab\\matrix-bot-widget\\node_modules\\matrix-widget-api\\src\\models\\Widget.ts"],"sourcesContent":["/*\n * Copyright 2020 The Matrix.org Foundation C.I.C.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IWidget, IWidgetData, WidgetType } from \"..\";\nimport { assertPresent } from \"./validation/utils\";\nimport { ITemplateParams, runTemplate } from \"..\";\n\n/**\n * Represents the barest form of widget.\n */\nexport class Widget {\n    public constructor(private definition: IWidget) {\n        if (!this.definition) throw new Error(\"Definition is required\");\n\n        assertPresent(definition, \"id\");\n        assertPresent(definition, \"creatorUserId\");\n        assertPresent(definition, \"type\");\n        assertPresent(definition, \"url\");\n    }\n\n    /**\n     * The user ID who created the widget.\n     */\n    public get creatorUserId(): string {\n        return this.definition.creatorUserId;\n    }\n\n    /**\n     * The type of widget.\n     */\n    public get type(): WidgetType {\n        return this.definition.type;\n    }\n\n    /**\n     * The ID of the widget.\n     */\n    public get id(): string {\n        return this.definition.id;\n    }\n\n    /**\n     * The name of the widget, or null if not set.\n     */\n    public get name(): string | null {\n        return this.definition.name || null;\n    }\n\n    /**\n     * The title for the widget, or null if not set.\n     */\n    public get title(): string | null {\n        return this.rawData.title || null;\n    }\n\n    /**\n     * The templated URL for the widget.\n     */\n    public get templateUrl(): string {\n        return this.definition.url;\n    }\n\n    /**\n     * The origin for this widget.\n     */\n    public get origin(): string {\n        return new URL(this.templateUrl).origin;\n    }\n\n    /**\n     * Whether or not the client should wait for the iframe to load. Defaults\n     * to true.\n     */\n    public get waitForIframeLoad(): boolean {\n        if (this.definition.waitForIframeLoad === false) return false;\n        if (this.definition.waitForIframeLoad === true) return true;\n        return true; // default true\n    }\n\n    /**\n     * The raw data for the widget. This will always be defined, though\n     * may be empty.\n     */\n    public get rawData(): IWidgetData {\n        return this.definition.data || {};\n    }\n\n    /**\n     * Gets a complete widget URL for the client to render.\n     * @param {ITemplateParams} params The template parameters.\n     * @returns {string} A templated URL.\n     */\n    public getCompleteUrl(params: ITemplateParams): string {\n        return runTemplate(this.templateUrl, this.definition, params);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}